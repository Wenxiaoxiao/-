{"version":3,"sources":["webpack:///./src/pages/userTerminal/mine/personInfo.vue?3264","webpack:///src/pages/userTerminal/mine/personInfo.vue","webpack:///./src/pages/userTerminal/mine/personInfo.vue?da0d","webpack:///./src/pages/userTerminal/mine/personInfo.vue","webpack:///./src/pages/userTerminal/mine/personInfo.vue?c63f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","fileList","length","attrs","url","_e","afterRead","model","value","callback","$$v","expression","_v","nickname","bio","on","editInfo","staticRenderFns","axios","name","components","data","mounted","getUserInfo","methods","token","JSON","parse","sessionStorage","getItem","$ajaxList","userInfo","params","that","res","avatar","console","log","file","formdata","append","headers","post","config","then","tmpArr","push","component"],"mappings":"kJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAAEN,EAAIO,UAAUP,EAAIO,SAASC,OAAO,EAAGJ,EAAG,MAAM,CAACE,YAAY,OAAOG,MAAM,CAAC,IAAMT,EAAIO,SAAS,GAAGG,IAAI,IAAM,MAAMV,EAAIW,KAAKP,EAAG,eAAe,CAACE,YAAY,cAAcG,MAAM,CAAC,aAAaT,EAAIY,WAAWC,MAAM,CAACC,MAAOd,EAAY,SAAEe,SAAS,SAAUC,GAAMhB,EAAIO,SAASS,GAAKC,WAAW,eAAe,GAAGb,EAAG,MAAM,CAACE,YAAY,SAAS,CAACN,EAAIkB,GAAG,UAAUd,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,eAAe,CAACK,MAAM,CAAC,MAAQ,OAAO,CAACL,EAAG,YAAY,CAACS,MAAM,CAACC,MAAOd,EAAY,SAAEe,SAAS,SAAUC,GAAMhB,EAAImB,SAASH,GAAKC,WAAW,eAAe,GAAGb,EAAG,eAAe,CAACK,MAAM,CAAC,MAAQ,SAAS,CAACL,EAAG,YAAY,CAACS,MAAM,CAACC,MAAOd,EAAO,IAAEe,SAAS,SAAUC,GAAMhB,EAAIoB,IAAIJ,GAAKC,WAAW,UAAU,IAAI,KAAKb,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,aAAa,CAACK,MAAM,CAAC,MAAQ,GAAG,MAAQ,GAAG,MAAQ,WAAWY,GAAG,CAAC,MAAQrB,EAAIsB,WAAW,CAACtB,EAAIkB,GAAG,SAAS,MAC7hCK,EAAkB,G,wBCuBlBC,EAAQ,EAAZ,QAEA,GACEC,KAAM,aACNC,WAAY,CACV,eAAgB,WAApB,yDAEEC,KALF,WAMI,MAAO,CACLP,IAAK,KACLD,SAAU,KACVZ,SAAU,KAGdqB,QAZF,WAaI3B,KAAK4B,eAEPC,QAAS,CAEPD,YAFJ,WAGM,IAAN,OACA,GACQE,MAAOC,KAAKC,MAAMC,eAAeC,QAAQ,cAAcJ,OAEzD9B,KAAKmC,UAAUC,SAASC,GAAQ,SAAtC,GACQC,EAAKpB,SAAWqB,EAAIrB,SACpBoB,EAAKhC,SAAW,CAAC,CAAzB,0BACQgC,EAAKnB,IAAMoB,EAAIpB,QAGnBE,SAbJ,WAcM,IACN,GACQmB,OAAQxC,KAAKM,SAAS,GAAGG,IACzBS,SAAUlB,KAAKkB,SACfC,IAAKnB,KAAKmB,IACVW,MAAOC,KAAKC,MAAMC,eAAeC,QAAQ,cAAcJ,OAEzD9B,KAAKmC,UAAUd,SAASgB,GAAQ,SAAtC,GACQ,OAAR,OAAQ,CAAR,aAGI1B,UAzBJ,SAyBA,GACM,IAAN,OACA,eACM8B,QAAQC,IAAIC,GACZC,EAASC,OAAO,MAAOF,EAAKA,MAC5B,IAAN,6BACA,GACQG,QAAS,CACP,eAAgB,wBAGpBvB,EAAMwB,KAAKtC,EAAKmC,EAAUI,GAAQC,MAAK,SAA7C,GACQ,IAAR,KACQC,EAAOC,KAAK,CAApB,6BACQb,EAAKhC,SAAW4C,EAChBT,QAAQC,IAAIJ,EAAKhC,gBCjF6b,I,wBCQld8C,EAAY,eACd,EACAtD,EACAwB,GACA,EACA,KACA,KACA,MAIa,aAAA8B,E,2CCnBf,yBAA6sB,EAAG","file":"static/js/chunk-329ee724.996a8db9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"personInfo full-page\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"logo-wrapper\"},[(_vm.fileList&&_vm.fileList.length>0)?_c('img',{staticClass:\"logo\",attrs:{\"src\":_vm.fileList[0].url,\"alt\":\"\"}}):_vm._e(),_c('van-uploader',{staticClass:\"logo_upload\",attrs:{\"after-read\":_vm.afterRead},model:{value:(_vm.fileList),callback:function ($$v) {_vm.fileList=$$v},expression:\"fileList\"}})],1),_c('div',{staticClass:\"title\"},[_vm._v(\"基本信息\")]),_c('div',{staticClass:\"fields\"},[_c('common-field',{attrs:{\"label\":\"昵称\"}},[_c('van-field',{model:{value:(_vm.nickname),callback:function ($$v) {_vm.nickname=$$v},expression:\"nickname\"}})],1),_c('common-field',{attrs:{\"label\":\"个性签名\"}},[_c('van-field',{model:{value:(_vm.bio),callback:function ($$v) {_vm.bio=$$v},expression:\"bio\"}})],1)],1)]),_c('div',{staticClass:\"btn-container\"},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"color\":\"#1574F6\"},on:{\"click\":_vm.editInfo}},[_vm._v(\"保存\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"personInfo full-page\">\n    <div class=\"content\">\n      <div class=\"logo-wrapper\">\n        <img :src=\"fileList[0].url\" alt class=\"logo\" v-if=\"fileList&&fileList.length>0\" />\n        <van-uploader :after-read=\"afterRead\" v-model=\"fileList\" class=\"logo_upload\" />\n      </div>\n      <div class=\"title\">基本信息</div>\n      <div class=\"fields\">\n        <common-field label=\"昵称\">\n          <van-field v-model=\"nickname\" />\n        </common-field>\n        <common-field label=\"个性签名\">\n          <van-field v-model=\"bio\" />\n        </common-field>\n      </div>\n    </div>\n    <div class=\"btn-container\">\n      <van-button round block color=\"#1574F6\" @click=\"editInfo\">保存</van-button>\n    </div>\n  </div>\n</template>\n\n<script>\nvar axios = require(\"axios\");\nimport { Toast } from \"vant\";\nexport default {\n  name: \"personInfo\",\n  components: {\n    \"common-field\": () => import(\"../../../components/common-field\")\n  },\n  data() {\n    return {\n      bio: null,\n      nickname: null,\n      fileList: []\n    };\n  },\n  mounted() {\n    this.getUserInfo();\n  },\n  methods: {\n    //获取个人信息\n    getUserInfo() {\n      let that = this;\n      let params = {\n        token: JSON.parse(sessionStorage.getItem(\"USER_INFO\")).token\n      };\n      this.$ajaxList.userInfo(params, function(res) {\n        that.nickname = res.nickname;\n        that.fileList = [{ url: res.avatar, isImage: true }];\n        that.bio = res.bio;\n      });\n    },\n    editInfo() {\n      let that = this;\n      let params = {\n        avatar: this.fileList[0].url,\n        nickname: this.nickname,\n        bio: this.bio,\n        token: JSON.parse(sessionStorage.getItem(\"USER_INFO\")).token\n      };\n      this.$ajaxList.editInfo(params, function(res) {\n        Toast(\"修改成功！\");\n      });\n    },\n    afterRead(file) {\n      let that = this;\n      let formdata = new FormData();\n      console.log(file);\n      formdata.append(\"img\", file.file);\n      let url = \"/api/upload/imgUploadOne\";\n      let config = {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      };\n      axios.post(url, formdata, config).then(function(res) {\n        let tmpArr = [];\n        tmpArr.push({ url: res.data.data, isImage: true });\n        that.fileList = tmpArr;\n        console.log(that.fileList);\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.content {\n  height: calc(100vh - 54px);\n  padding-top: 80px;\n  .logo-wrapper {\n    height: 200px;\n    width: 200px;\n    display: block;\n    margin: 0 auto;\n    margin-bottom: 37px;\n    overflow: hidden;\n    position: relative;\n    .van-uploader__preview-delete {\n      display: none;\n    }\n    .van-uploader__preview {\n      display: none;\n    }\n    .logo,\n    .logo_upload {\n      height: 200px;\n      width: 200px;\n      border-radius: 50%;\n      display: block;\n      .van-uploader__wrapper,\n      .van-uploader__upload {\n        width: 200px;\n        height: 200px;\n      }\n    }\n    .logo_upload {\n      position: absolute;\n      left: 0;\n      top: 0;\n      opacity: 0;\n    }\n  }\n  .title {\n    height: 45px;\n    font-size: 32px;\n    font-weight: 400;\n    line-height: 45px;\n    color: #999;\n    text-align: center;\n  }\n  .fields {\n    margin-top: 60px;\n    padding: 0 80px;\n  }\n}\n.btn-container {\n  width: 200px;\n  position: fixed;\n  bottom: 100px;\n  left: 50%;\n  transform: translateX(-50%);\n}\n</style>","import mod from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./personInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./personInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./personInfo.vue?vue&type=template&id=28c87924&\"\nimport script from \"./personInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./personInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./personInfo.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./personInfo.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./personInfo.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}