/*! wtsLogin -v1.0 梧桐树保险网微信登录 created By 兴来 develop by 兴来 */
function getBrowser(){if(!navigator)return{};var e=navigator.userAgent;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Firefox")>-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:e.indexOf("Safari")>-1,user:e}}function isWeiXin(){return"micromessenger"==getBrowser().user.toLowerCase().match(/MicroMessenger/i)}function init(){let e=location.origin==domain[1]?1:0;initParams.domain=domain[e],initParams.appid=appids[e],toChannel()}function getUserInfo(e){http.ajax({type:"get",url:"/user/info",success:function(t,n){if(console.log(t),1e4==t.httpCode)return init();e(t.data)}})}function toChannel(){isWeiXin()&&wxmplogin()}function wxmplogin(){sessionStorage.loginUrl=location.href;var e="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+initParams.appid+"&redirect_uri="+encodeURIComponent(initParams.domain+"/login")+"&response_type=code&scope="+initParams.wxscope+"&state="+initParams.wxscope+"#wechat_redirect";location.href=e}const http={ajax:(e={})=>{let t=Object.assign({url:"",type:"POST",dataType:"json",async:!0,data:null,contentType:"application/x-www-form-urlencoded",headers:{},timeout:1e3,beforeSend:e=>{},success:(e,t,n)=>{},error:(e,t,n)=>{},complete:(e,t)=>{}},e);let n=new XMLHttpRequest;n.addEventListener("loadstart",e=>{t.beforeSend(n)});n.addEventListener("load",e=>{const i=n.status;if(i>=200&&i<300||304===i){let e;e="text"===n.responseType?n.responseText:"document"===n.responseType?n.responseXML:JSON.parse(n.response),t.success(e,i,n)}else t.error(n,i,e)});n.addEventListener("loadend",e=>{t.complete(n,n.status)});n.addEventListener("error",e=>{t.error(n,n.status,e)});n.addEventListener("timeout",e=>{t.error(n,408,e)});let i=!1;let o=t.type.toUpperCase();"GET"!==o&&"DELETE"!==o||(i=!0,t.url+=http.getUrlParam(t.url,t.data));n.open(t.type,t.url,t.async);t.headers["Content-Type"]=t.contentType;t.headers["X-Requested-With"]="XMLHttpRequest";for(const e of Object.keys(t.headers))n.setRequestHeader(e,t.headers[e]);t.async&&t.timeout&&(n.timeout=t.timeout);n.send(i?null:http.getQueryData(t.data))},getUrlParam:(e,t)=>{if(!t)return"";let n=t instanceof Object?http.getQueryString(t):t;return-1!==e.indexOf("?")?n:"?"+n},getQueryData:e=>{if(!e)return null;if("string"==typeof e)return e;if(e instanceof FormData)return e;return http.getQueryString(e)},getQueryString:e=>{let t=[];e instanceof Object&&Object.keys(e).forEach(n=>{let i=e[n];t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))});return t.join("&")}};var domain=["http://epf.wts9999.net","https://bx.wts999.com"],initParams={wxscope:"snsapi_userinfo",zfbcode:"auth_base"},appids=["wx32c3d5eef61e408d","wx32c3d5eef61e408d"],main={init:init,getUserInfo:getUserInfo};export default main;
//# sourceMappingURL=epps_login.esm.min.js.map
